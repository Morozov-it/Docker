### Docker

cmd> docker - общая команда просмотра функций докера
cmd> docker version - общая команда просмотра функций докера

Install docker extension in VScode
hub.docker.com - это склад с готовыми образами

# Containers & Images
Images - это образы (шаблоны), из них составляются контейнеры. Они только для чтения, нельзя изменить
Container - включает в себе набор образов, необходим для их чтения. Это место для запуска приложения.

# Images
cmd> docker pull node -установить образ (пакет) для работы с nodeJS
cmd> docker images -просмотреть установленные на ПК образы
cmd> docker image prune -удалить все неиспользуемые образы кроме базовых
cmd> docker rmi 78074855188 -удалить конкретный образ


# Containers
cmd> docker ps --help -флаг help показывает описание команды ps
cmd> docker ps -a -посмотреть список всех контейнеров

cmd> docker run node -зарегистрировать контейнер на основании образа с node (можно прописать id)
cmd> docker run -it node -запустить контейнер на основании образа с node и работать внутри контейнера
cmd> docker start f78074855188 -запустить контейнер в фоновом режиме
cmd> docker stop f78074855188 -остановка контейнера
cmd> .exit -выход из контейнера

cmd> docker rm 8f8ec6254606 -удалить созданный контейнер
cmd> docker container prune -удалить все остановленные контейнеры

# App
В корневой директории приложения создать файл Dockerfile

Это файл с инструкциями, на основании которого будет создан контейнер
    FROM node -на основании базового образа

    WORKDIR /app -указывается рабочая директория

    COPY package.json /app -если будут изменения то перезапись, если нет то просто обновление кода

    RUN npm install -собирает образ

    COPY . . -копируется вся папка с проектом в корень образа

    EXPOSE 3000 -указывается порт, на котором будет запуск на образе

    CMD ["npm start"] -запускает образ

app> docker build . -запуск процесса создания образа приложения
app> docker build -t appname:2.0 . -создания образа приложения с именем и версией


# Main commands

app> docker run -p 3000:3000 1609600fc0c7 -запуск контейнера на основании образа(id) на порт 3000 локально и порт 3000 в образе приложения
app> docker run -d -p 3000:3000 1609600fc0c7 -аналогично но без погружения в консоль приложения в образе
    --name logsapp -можно задать свое имя для контейнера
    --rm -после остановки сразу удаляется из списка сгенерированных

app> docker attach 1609600fc0c7 -перейти в консоль запущенного контейнера (не работает как надо)